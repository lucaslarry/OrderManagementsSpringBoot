-- H2 2.1.214;
SET DB_CLOSE_DELAY -1;        
;             
CREATE USER IF NOT EXISTS "SA" SALT '1950454ca854903e' HASH '21ca397d28e0e5f5ac98d27ee7e4bdf748348b3bb5fecdf30bb51e89022c9494' ADMIN;         
CREATE CACHED TABLE "PUBLIC"."ROLE_X_USER"(
    "USER_ID" BIGINT NOT NULL,
    "ROLE_ID" BIGINT NOT NULL
);
ALTER TABLE "PUBLIC"."ROLE_X_USER" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_5" PRIMARY KEY("USER_ID", "ROLE_ID");  
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.ROLE_X_USER;             
INSERT INTO "PUBLIC"."ROLE_X_USER" VALUES
(1, 1),
(2, 2);   
CREATE CACHED TABLE "PUBLIC"."TB_CATEGORY"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 4) NOT NULL,
    "NAME" CHARACTER VARYING(255)
);   
ALTER TABLE "PUBLIC"."TB_CATEGORY" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_D" PRIMARY KEY("ID");  
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.TB_CATEGORY;             
INSERT INTO "PUBLIC"."TB_CATEGORY" VALUES
(1, 'Electronics'),
(2, 'Books'),
(3, 'Computers');              
CREATE CACHED TABLE "PUBLIC"."TB_ORDER"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 4) NOT NULL,
    "MOMENT" TIMESTAMP,
    "ORDER_STATUS" INTEGER,
    "CLIENT_ID" BIGINT
);           
ALTER TABLE "PUBLIC"."TB_ORDER" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_5F" PRIMARY KEY("ID");    
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.TB_ORDER;
INSERT INTO "PUBLIC"."TB_ORDER" VALUES
(1, TIMESTAMP '2024-08-17 09:14:50', 1, 1),
(2, TIMESTAMP '2024-09-11 11:44:23', 0, 2),
(3, TIMESTAMP '2024-09-17 10:11:43', 0, 1); 
CREATE CACHED TABLE "PUBLIC"."TB_ORDER_ITEM"(
    "PRICE" DOUBLE PRECISION NOT NULL,
    "QUANTITY" INTEGER NOT NULL,
    "PRODUCT_ID" BIGINT NOT NULL,
    "ORDER_ID" BIGINT NOT NULL
);
ALTER TABLE "PUBLIC"."TB_ORDER_ITEM" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_C" PRIMARY KEY("ORDER_ID", "PRODUCT_ID");            
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.TB_ORDER_ITEM;           
INSERT INTO "PUBLIC"."TB_ORDER_ITEM" VALUES
(90.5, 2, 1, 1),
(1250.0, 1, 3, 1),
(1250.0, 2, 3, 2),
(100.99, 2, 5, 3);     
CREATE CACHED TABLE "PUBLIC"."TB_PAYMENT"(
    "MOMENT" TIMESTAMP,
    "ORDER_ID" BIGINT NOT NULL
);       
ALTER TABLE "PUBLIC"."TB_PAYMENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_E" PRIMARY KEY("ORDER_ID");             
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.TB_PAYMENT;              
INSERT INTO "PUBLIC"."TB_PAYMENT" VALUES
(TIMESTAMP '2024-08-17 12:14:50', 1);               
CREATE CACHED TABLE "PUBLIC"."TB_PRODUCT"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 6) NOT NULL,
    "DESCRIPTION" CHARACTER VARYING(255),
    "IMAGE_URL" CHARACTER VARYING(255),
    "NAME" CHARACTER VARYING(255),
    "PRICE" DOUBLE PRECISION
); 
ALTER TABLE "PUBLIC"."TB_PRODUCT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_6" PRIMARY KEY("ID");   
-- 5 +/- SELECT COUNT(*) FROM PUBLIC.TB_PRODUCT;              
INSERT INTO "PUBLIC"."TB_PRODUCT" VALUES
(1, 'Lorem ipsum dolor sit amet, consectetur.', '', 'The Lord of the Rings', 90.5),
(2, 'Nulla eu imperdiet purus. Maecenas ante.', '', 'Smart TV', 2190.0),
(3, 'Nam eleifend maximus tortor, at mollis.', '', 'Macbook Pro', 1250.0),
(4, 'Donec aliquet odio ac rhoncus cursus.', '', 'PC Gamer', 1200.0),
(5, 'Cras fringilla convallis sem vel faucibus.', '', 'Rails for Dummies', 100.99);               
CREATE CACHED TABLE "PUBLIC"."TB_PRODUCT_X_CATEGORY"(
    "PRODUCT_ID" BIGINT NOT NULL,
    "CATEGORY_ID" BIGINT NOT NULL
);               
ALTER TABLE "PUBLIC"."TB_PRODUCT_X_CATEGORY" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4" PRIMARY KEY("PRODUCT_ID", "CATEGORY_ID"); 
-- 6 +/- SELECT COUNT(*) FROM PUBLIC.TB_PRODUCT_X_CATEGORY;   
INSERT INTO "PUBLIC"."TB_PRODUCT_X_CATEGORY" VALUES
(1, 2),
(2, 1),
(2, 3),
(3, 3),
(4, 3),
(5, 2);     
CREATE CACHED TABLE "PUBLIC"."TB_ROLE"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 3) NOT NULL,
    "NAME" CHARACTER VARYING(255)
);       
ALTER TABLE "PUBLIC"."TB_ROLE" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_D1" PRIMARY KEY("ID");     
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.TB_ROLE; 
INSERT INTO "PUBLIC"."TB_ROLE" VALUES
(1, 'Admin'),
(2, 'User');            
CREATE CACHED TABLE "PUBLIC"."TB_USER"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 3) NOT NULL,
    "EMAIL" CHARACTER VARYING(255),
    "NAME" CHARACTER VARYING(255),
    "PASSWORD" CHARACTER VARYING(255),
    "PHONE" CHARACTER VARYING(255)
);     
ALTER TABLE "PUBLIC"."TB_USER" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_D18" PRIMARY KEY("ID");    
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.TB_USER; 
INSERT INTO "PUBLIC"."TB_USER" VALUES
(1, 'maria@gmail.com', 'Maria', 'senha', '988888888'),
(2, 'joao@gmail.com', 'Joao', 'ahnes', '977777777');           
ALTER TABLE "PUBLIC"."TB_ORDER_ITEM" ADD CONSTRAINT "PUBLIC"."FKGEOBGL2XU916HE8VHLJKTWXNX" FOREIGN KEY("ORDER_ID") REFERENCES "PUBLIC"."TB_ORDER"("ID") NOCHECK;              
ALTER TABLE "PUBLIC"."TB_ORDER" ADD CONSTRAINT "PUBLIC"."FKI0X0RV7D65VSCEUY33KM9567N" FOREIGN KEY("CLIENT_ID") REFERENCES "PUBLIC"."TB_USER"("ID") NOCHECK;   
ALTER TABLE "PUBLIC"."TB_PRODUCT_X_CATEGORY" ADD CONSTRAINT "PUBLIC"."FKHJ9R1W4VE9FS3FPYNJKI3SHR4" FOREIGN KEY("PRODUCT_ID") REFERENCES "PUBLIC"."TB_PRODUCT"("ID") NOCHECK;  
ALTER TABLE "PUBLIC"."TB_PRODUCT_X_CATEGORY" ADD CONSTRAINT "PUBLIC"."FKJTHU2NB2764B09EYHGGJA4UH9" FOREIGN KEY("CATEGORY_ID") REFERENCES "PUBLIC"."TB_CATEGORY"("ID") NOCHECK;
ALTER TABLE "PUBLIC"."TB_PAYMENT" ADD CONSTRAINT "PUBLIC"."FKOKAF4IL2CWIT4H780C25DV04R" FOREIGN KEY("ORDER_ID") REFERENCES "PUBLIC"."TB_ORDER"("ID") NOCHECK; 
ALTER TABLE "PUBLIC"."ROLE_X_USER" ADD CONSTRAINT "PUBLIC"."FKICNG8IDT3L4ISPSERQA47FUMW" FOREIGN KEY("ROLE_ID") REFERENCES "PUBLIC"."TB_ROLE"("ID") NOCHECK;  
ALTER TABLE "PUBLIC"."ROLE_X_USER" ADD CONSTRAINT "PUBLIC"."FKTOO1IY0STM9QB8VU3NI491BJ2" FOREIGN KEY("USER_ID") REFERENCES "PUBLIC"."TB_USER"("ID") NOCHECK;  
ALTER TABLE "PUBLIC"."TB_ORDER_ITEM" ADD CONSTRAINT "PUBLIC"."FK4H5XID5QEHSET7QWE5L9C997X" FOREIGN KEY("PRODUCT_ID") REFERENCES "PUBLIC"."TB_PRODUCT"("ID") NOCHECK;          
